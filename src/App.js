import { useState, useEffect } from 'react';

export const WeatherIcons = {
  "01d": "/icons/sunny.svg",
  "01n": "/icons/night.svg",
  "02d": "/icons/day.svg",
  "02n": "/icons/cloudy-night.svg",
  "03d": "/icons/cloudy.svg",
  "03n": "/icons/cloudy.svg",
  "04d": "/icons/perfect-day.svg",
  "04n": "/icons/cloudy-night.svg",
  "09d": "/icons/rain.svg",
  "09n": "/icons/rain-night.svg",
  "10d": "/icons/rain.svg",
  "10n": "/icons/rain-night.svg",
  "11d": "/icons/storm.svg",
  "11n": "/icons/storm.svg",
};

const App = () => {

  const [city, setCity] = useState('Tokyo');
  const [getState, setGetState] = useState('');
  const [weather, setWeather] = useState({});

  useEffect(() => {
    async function fetchData() {
      const response = await fetch(`https://api.openweathermap.org/data/2.5/weather?q=${city}&units=metric&appid=${process.env.REACT_APP_API_KEY}`);
      const data = await response.json();
      setWeather({
        name: data.name,
        country: data.sys.country,
        icon: data.weather[0].icon,
        temp: data.main.temp,
        pressure: data.main.pressure,
        desc: data.weather[0].description,
        humidity: data.main.humidity,
        wind: data.wind.speed
      });
    }
    fetchData();
  }, [city])

  const handleInput = (event) => {
    setGetState(event.target.value)
  }
  
  const handleClick = () => {
    setCity(getState);
  }

  return ( 
    <div className="card">
      <div className="search">
        <input className="search-bar" type="text" placeholder="Search..." onChange={handleInput} />
        <button className="search-button" onClick={handleClick}>Search</button>
      </div>
      <h1 className="title">Weather in {weather.name}, {weather.country}</h1>
      <div className="wrapper">
        <img className='icon' src={WeatherIcons[weather.icon]} alt="Weather status icon" />
        <div className="info">
          <span className='temp'>{weather.temp}Â°</span>
          <p className='desc'>{weather.desc}</p>
        </div>
      </div>
      <div className="wrapper">
        <div className='wind'>
          <svg width="35" height="33" viewBox="0 0 35 33" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M13.934 12.2634L1.96639 12.2781C1.70912 12.2784 1.45447 12.2278 1.21681 12.1293C0.979156 12.0308 0.763299 11.8863 0.581708 11.704C0.400117 11.5218 0.256116 11.3054 0.158447 11.0674C0.0607778 10.8294 0.0113531 10.5744 0.0125886 10.3172C0.0107245 10.0599 0.0595261 9.80483 0.156613 9.56659C0.2537 9.32834 0.397172 9.11162 0.578318 8.92894C0.759463 8.74626 0.974966 8.60119 1.21238 8.50209C1.4498 8.403 1.70432 8.35185 1.96159 8.35154L13.9292 8.33691C14.5102 8.33621 15.0674 8.10551 15.4788 7.69527C15.8903 7.28503 16.1226 6.7286 16.125 6.14759C16.1243 5.56454 15.8918 5.00568 15.4791 4.59391C15.0663 4.18214 14.5069 3.95119 13.9238 3.9519L10.3031 3.95632C9.78245 3.95696 9.28279 3.75072 8.91416 3.38299C8.54552 3.01525 8.33792 2.51617 8.33729 1.99548C8.33665 1.47479 8.54303 0.975166 8.91076 0.606533C9.2785 0.237901 9.77765 0.0304433 10.2983 0.0298071L13.919 0.0253836C15.5414 0.0265155 17.0973 0.671297 18.2448 1.8182C19.3923 2.9651 20.0379 4.52041 20.0399 6.1428C20.0387 7.76316 19.3954 9.31705 18.251 10.4642C17.1067 11.6114 15.5543 12.2583 13.934 12.2634Z" fill="#FDFEFF"/>
            <path d="M28.2835 17.9005L1.97329 17.9327C1.71603 17.933 1.46138 17.8824 1.22372 17.7839C0.986064 17.6854 0.770207 17.5409 0.588616 17.3586C0.407025 17.1764 0.263024 16.96 0.165355 16.722C0.0676858 16.484 0.0182611 16.2291 0.0194966 15.9718C0.0176325 15.7145 0.0664341 15.4595 0.163521 15.2212C0.260608 14.983 0.40408 14.7663 0.585226 14.5836C0.766371 14.4009 0.981874 14.2558 1.21929 14.1567C1.45671 14.0576 1.71123 14.0065 1.9685 14.0062L28.2787 13.974C28.9283 13.9732 29.5509 13.7152 30.0108 13.2564C30.4707 12.7976 30.7302 12.1754 30.7325 11.5258C30.7286 10.8762 30.4676 10.2545 30.0066 9.79687C29.5456 9.33919 28.9223 9.0827 28.2727 9.0835L24.9103 9.08761C24.3897 9.08824 23.89 8.88201 23.5214 8.51427C23.1527 8.14654 22.9454 7.64742 22.9448 7.12673C22.9445 6.86891 22.9947 6.61357 23.0931 6.37526C23.1915 6.13694 23.3359 5.92035 23.518 5.73782C23.7 5.55529 23.9163 5.41039 24.1543 5.31144C24.3924 5.21248 24.6477 5.16141 24.9055 5.16109L28.3264 5.15691C29.1632 5.15589 29.9921 5.31968 30.7655 5.63895C31.539 5.95822 32.2419 6.42669 32.8343 7.01764C33.4267 7.60859 33.897 8.31046 34.2182 9.08312C34.5393 9.85579 34.7052 10.6841 34.7062 11.5209C34.7073 12.3626 34.5413 13.1962 34.2184 13.9735C33.8955 14.7508 33.4218 15.4565 32.8246 16.0496C32.2274 16.6428 31.5186 17.1118 30.7392 17.4295C29.9597 17.7472 29.1252 17.9073 28.2835 17.9005Z" fill="#FDFEFF"/>
            <path d="M17.685 32.0208L12.7122 32.0269C12.1915 32.0275 11.6918 31.8213 11.3232 31.4535C10.9546 31.0858 10.747 30.5867 10.7463 30.066C10.746 29.8088 10.7967 29.554 10.8952 29.3163C10.9938 29.0786 11.1381 28.8628 11.3204 28.6812C11.5026 28.4996 11.719 28.3559 11.957 28.2582C12.195 28.1605 12.4501 28.1109 12.7074 28.1121L17.6802 28.106C18.2799 28.1022 18.8536 27.8611 19.276 27.4354C19.6985 27.0097 19.9352 26.4341 19.9345 25.8344C19.9337 25.2357 19.6954 24.6619 19.2715 24.2391C18.8477 23.8163 18.2733 23.5792 17.6747 23.58L1.98022 23.5991C1.46265 23.5998 0.96599 23.3948 0.599565 23.0292C0.23314 22.6637 0.0270685 22.1676 0.0264362 21.65C0.0245721 21.3928 0.0733737 21.1377 0.170461 20.8994C0.267548 20.6612 0.41102 20.4445 0.592165 20.2618C0.773311 20.0791 0.988814 19.9341 1.22623 19.835C1.46365 19.7359 1.71817 19.6847 1.97544 19.6844L17.6699 19.6652C19.3079 19.6632 20.8797 20.3112 22.0404 21.4669C23.2012 22.6226 23.856 24.1916 23.8611 25.8296C23.86 27.4686 23.2092 29.0405 22.0517 30.2009C20.8941 31.3613 19.324 32.0157 17.685 32.0208Z" fill="#FDFEFF"/>
          </svg>
          <span>{weather.wind} m/s</span>
        </div>
        <div className='humidity'>
          <svg width="43" height="33" viewBox="0 0 43 33" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M9.38425 32.0408C6.99014 32.0406 4.68718 31.1227 2.94926 29.4761C1.21133 27.8295 0.170635 25.5794 0.0413258 23.1888C-0.0879838 20.7982 0.703925 18.4489 2.2541 16.6244C3.80428 14.8 5.9948 13.6391 8.37491 13.3806C7.67063 10.6327 8.08679 7.71764 9.53182 5.27661C10.9769 2.83558 13.3324 1.06857 16.0803 0.364297C18.8281 -0.339979 21.7432 0.0761732 24.1842 1.52121C26.6253 2.96624 28.3923 5.32178 29.0965 8.06964C30.731 7.84002 32.3952 7.94917 33.9857 8.39028C35.5762 8.8314 37.0589 9.59505 38.3416 10.6337C39.6243 11.6724 40.6795 12.9639 41.4417 14.4279C42.2039 15.8919 42.6567 17.4971 42.7719 19.1435C42.8872 20.79 42.6624 22.4426 42.1116 23.9985C41.5609 25.5544 40.6958 26.9803 39.5703 28.1876C38.4449 29.3948 37.083 30.3576 35.5695 31.016C34.056 31.6744 32.4232 32.0143 30.7727 32.0147L9.38425 32.0408Z" fill="#FDFEFF"/>
          </svg>
          <span>{weather.humidity}%</span>
        </div>
        <div className="pressure">
          <svg width="37" height="33" viewBox="0 0 37 33" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M9.83802 32.9917C8.73982 32.9612 7.69501 32.679 6.70358 32.1452C5.71215 31.6113 4.77411 30.8258 3.88945 29.7886C2.66923 28.3243 1.71593 26.5779 1.02956 24.5493C0.343187 22.5207 0 20.4387 0 18.3033C0 15.7713 0.480461 13.3919 1.44138 11.165C2.40231 8.93811 3.70642 7.00101 5.35371 5.35371C7.00101 3.70642 8.93811 2.40231 11.165 1.44138C13.3919 0.480461 15.7713 -4.76837e-07 18.3033 -4.76837e-07C20.8352 -4.76837e-07 23.2147 0.480461 25.4416 1.44138C27.6685 2.40231 29.6056 3.72167 31.2529 5.39947C32.9002 7.07727 34.2043 9.04488 35.1652 11.3023C36.1261 13.5597 36.6066 15.9849 36.6066 18.5778C36.6066 20.8658 36.2405 23.0316 35.5084 25.0755C34.7763 27.1194 33.7238 28.8429 32.3511 30.2462C31.4664 31.1614 30.5436 31.8477 29.5827 32.3053C28.6218 32.7629 27.638 32.9917 26.6313 32.9917C26.0822 32.9917 25.5331 32.923 24.984 32.7858C24.4349 32.6485 23.8858 32.4426 23.3367 32.168L20.7742 30.8868C20.3777 30.6733 19.9735 30.5207 19.5616 30.4292C19.1498 30.3377 18.7304 30.2919 18.3033 30.2919C17.8762 30.2919 17.4568 30.3377 17.0449 30.4292C16.6331 30.5207 16.2289 30.6733 15.8323 30.8868L13.2699 32.168C12.6903 32.4731 12.1183 32.6943 11.554 32.8315C10.9896 32.9688 10.4176 33.0222 9.83802 32.9917ZM9.97529 30.2462C10.3109 30.2462 10.654 30.2004 11.0049 30.1089C11.3557 30.0174 11.6989 29.8954 12.0344 29.7428L14.5969 28.4616C15.1765 28.1871 15.7713 27.9735 16.3814 27.821C16.9916 27.6685 17.6169 27.5922 18.2575 27.5922C18.8981 27.5922 19.5235 27.6608 20.1336 27.7981C20.7437 27.9354 21.3538 28.1566 21.9639 28.4616L24.5722 29.7428C24.9077 29.8954 25.2433 30.0174 25.5788 30.1089C25.9144 30.2004 26.25 30.2462 26.5855 30.2462C27.2872 30.2462 27.9659 30.0784 28.6218 29.7428C29.2776 29.4073 29.9106 28.9039 30.5207 28.2328C31.5884 27.0736 32.4121 25.6475 32.9917 23.9544C33.5713 22.2614 33.8611 20.4692 33.8611 18.5778C33.8611 14.124 32.3587 10.3719 29.3539 7.32132C26.3491 4.27077 22.6656 2.74549 18.3033 2.74549C13.941 2.74549 10.2575 4.28602 7.25268 7.36707C4.24789 10.4481 2.74549 14.2156 2.74549 18.6694C2.74549 20.5912 3.0353 22.3834 3.6149 24.0459C4.1945 25.7085 5.01815 27.1194 6.08584 28.2786C6.69595 28.9497 7.32132 29.4454 7.96193 29.7657C8.60255 30.086 9.27367 30.2462 9.97529 30.2462ZM17.5712 19.4472C17.9067 19.6303 18.2347 19.6913 18.555 19.6303C18.8753 19.5693 19.1574 19.4015 19.4015 19.1269L24.1146 13.1326C24.4807 13.5597 24.801 14.0096 25.0755 14.4825C25.3501 14.9553 25.5636 15.4663 25.7161 16.0154H28.5531C28.004 13.6054 26.7762 11.6302 24.8696 10.0897C22.963 8.54916 20.7742 7.7789 18.3033 7.7789C15.8323 7.7789 13.636 8.54916 11.7141 10.0897C9.79226 11.6302 8.57204 13.6054 8.05345 16.0154H10.8905C11.4091 14.3681 12.3471 13.0411 13.7046 12.0344C15.0621 11.0277 16.595 10.5244 18.3033 10.5244C18.9439 10.5244 19.5769 10.6007 20.2023 10.7532C20.8276 10.9057 21.4148 11.1345 21.9639 11.4396L17.2051 17.4796C16.961 17.8152 16.8772 18.1736 16.9534 18.555C17.0297 18.9363 17.2356 19.2337 17.5712 19.4472Z" fill="white"/>
          </svg>
          <span>{weather.pressure}</span>
        </div>
      </div>
    </div>
   );
}
 
export default App;